---
title: "Get started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{get-started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(gwilenalim)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/flat_full.Rmd: do not edit by hand -->

<!-- Run this 'development' chunk -->
<!-- Store every call to library() that you need to explore your functions -->


<!--
 You need to run the 'description' chunk in the '0-dev_history.Rmd' file before continuing your code there.

If it is the first time you use {fusen}, after 'description', you can directly run the last chunk of the present file with inflate() inside.
--> 


# importe_data_step

Cette fonction permet d'importer sous GeoGwilen les données téléchargées manuellement depuis https://www.assainissement.developpement-durable.gouv.fr/PortailAC/ 

A ce jour nous n'avons pas connaissance de flux ou d'url fixe permettant de télécharger les données brutes.
Pour récupérer ces données il faut les télécharger année par année au format csv depuis la page téléchargement du site.
Il faut ensuite stocker l'ensemble des csv \u00e0 assembler dans un m\u00eame r\u00e9pertoire et indiquer \u00e0 la fonction le chemin d'accès à ce répertoire.

Les données dans leur ensemble sont alors envoyées sous la base GeoGwilen dans le schéma m621_step sous forme d'une table unique bdd_step_fr.

Ces données sont mises en forme par la fonction pour ne retenir que les sites localisés sur le bassin de la Vilaine.
Elles sont séparées et stockées dans 5 tables dans le schéma r621_step :
* une avec les objets géographiques ponctuels position des STEP r621_step_vilaine_xy_ste
* une avec les objets géographiques ponctuels position des points de rejets r621_rejets_vilaine_xy_res
* une avec des objets géographiques linéaires : lignes droites entre les STEP et leurs points de rejets r621_liaison_steprejet_vilaine_xy_lis
* une table attributaire sur les conformités réglementaire des stations (et toutes les données variant d'une ann\u00e9e sur l'autre) : r621_conformite_cos
* une table attributaire sur les technologies et capacité nominales des stations : r621_ouvrages_ous



<!--
Create a chunk with an example of use for your function

- The chunk needs to be named `examples` at least
- It contains working examples of your function
- The chunk is better be named `examples-my_median` to be handled
correctly when inflated as a vignette

After inflating the template

-  This example will automatically be added in the '@examples' part of our function above in the "R/" directory
- This example will automatically be added in the vignette created from this Rmd template
-->


```{r examples}

  config <- yaml::read_yaml("C://workspace//gwilenalim//yaml//config.yml")
  dossier <- system.file(package = "gwilenalim")
  importe_data_step(dossier)

```

<!--
Create a chunk with a test of use for your function

- The chunk needs to be named `tests` at least
- It contains working tests of your function
- The chunk is better be named `tests-my_median` to be handled
correctly when inflated as a vignette

After inflating the template

-  This test code will automatically be added in the "tests/testthat/" directory
-->


# importe_stations_qualite

    

  

```{r example-importe_stations_qualite}
importe_stations_qualite()
```

  

<!--

# There can be development actions

Create a chunk with 'development' actions

- The chunk needs to be named `development` or `dev`
- It contains functions that are used for package development only
- Note that you may want to store most of these functions in the 0-dev_history.Rmd file

These are only included in the present flat template file, their content will not be part of the package anywhere else.
-->


  



# Inflate your package

You're one inflate from paper to box.
Build your package from this very Rmd using `fusen::inflate()`

- Verify your `"DESCRIPTION"` file has been updated
- Verify your function is in `"R/"` directory
- Verify your test is in `"tests/testthat/"` directory
- Verify this Rmd appears in `"vignettes/"` directory

